{"version":3,"sources":["../../../src/utils/filters.js"],"names":["timeAgo","parseTime","formatTime","nFormatter","html2Text","toThousandslsFilter","pluralize","time","label","between","Date","now","Number","cFormat","arguments","length","format","date","parseInt","formatObj","y","getFullYear","m","getMonth","d","getDate","h","getHours","i","getMinutes","s","getSeconds","a","getDay","timeStr","replace","result","key","value","option","diff","Math","ceil","num","digits","si","symbol","toFixed","toString","val","div","document","createElement","innerHTML","textContent","innerText"],"mappings":"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","file":"filters.js","sourcesContent":["function pluralize(time, label) {\n    if (time === 1) {\n        return time + label;\n    }\n    return time + label + 's';\n}\n\nexport function timeAgo(time) {\n    const between = Date.now() / 1000 - Number(time);\n    if (between < 3600) {\n        return pluralize(~~(between / 60), ' minute');\n    } else if (between < 86400) {\n        return pluralize(~~(between / 3600), ' hour');\n    } else {\n        return pluralize(~~(between / 86400), ' day');\n    }\n}\n\nexport function parseTime(time, cFormat) {\n    if (arguments.length === 0) {\n        return null;\n    }\n\n    if ((time + '').length === 10) {\n        time = +time * 1000;\n    }\n\n    const format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}';\n    let date;\n    if (typeof time === 'object') {\n        date = time;\n    } else {\n        date = new Date(parseInt(time, 0));\n    }\n    const formatObj = {\n        y: date.getFullYear(),\n        m: date.getMonth() + 1,\n        d: date.getDate(),\n        h: date.getHours(),\n        i: date.getMinutes(),\n        s: date.getSeconds(),\n        a: date.getDay()\n    };\n    const timeStr = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {\n        let value = formatObj[key];\n        if (key === 'a') return ['一', '二', '三', '四', '五', '六', '日'][value - 1];\n        if (result.length > 0 && value < 10) {\n            value = '0' + value;\n        }\n        return value || 0;\n    });\n    return timeStr;\n}\n\nexport function formatTime(time, option) {\n    time = +time * 1000;\n    const d = new Date(time);\n    const now = Date.now();\n\n    const diff = (now - d) / 1000;\n\n    if (diff < 30) {\n        return '刚刚';\n    } else if (diff < 3600) { // less 1 hour\n        return Math.ceil(diff / 60) + '分钟前';\n    } else if (diff < 3600 * 24) {\n        return Math.ceil(diff / 3600) + '小时前';\n    } else if (diff < 3600 * 24 * 2) {\n        return '1天前';\n    }\n    if (option) {\n        return parseTime(time, option);\n    } else {\n        return d.getMonth() + 1 + '月' + d.getDate() + '日' + d.getHours() + '时' + d.getMinutes() + '分';\n    }\n}\n\n/* 数字 格式化*/\nexport function nFormatter(num, digits) {\n    const si = [\n        {value: 1E18, symbol: 'E'},\n        {value: 1E15, symbol: 'P'},\n        {value: 1E12, symbol: 'T'},\n        {value: 1E9, symbol: 'G'},\n        {value: 1E6, symbol: 'M'},\n        {value: 1E3, symbol: 'k'}\n    ];\n    for (let i = 0; i < si.length; i++) {\n        if (num >= si[i].value) {\n            return (num / si[i].value + 0.1).toFixed(digits).replace(/\\.0+$|(\\.[0-9]*[1-9])0+$/, '$1') + si[i].symbol;\n        }\n    }\n    return num.toString();\n}\n\nexport function html2Text(val) {\n    const div = document.createElement('div');\n    div.innerHTML = val;\n    return div.textContent || div.innerText;\n}\n\nexport function toThousandslsFilter(num) {\n    return (+num || 0).toString().replace(/^-?\\d+/g, m => m.replace(/(?=(?!\\b)(\\d{3})+$)/g, ','));\n}\n"]}